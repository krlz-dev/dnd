<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dungeon Master - D&D Campaign Player</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-warning">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="bi bi-fire text-warning me-2"></i>
                <span class="brand-text">AI Dungeon Master</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" data-section="play"><i class="bi bi-controller me-1"></i>Play</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="character"><i class="bi bi-person-badge me-1"></i>Character</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="campaigns"><i class="bi bi-book me-1"></i>Campaigns</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-section="settings"><i class="bi bi-gear me-1"></i>Settings</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid main-content">
        <!-- Play Section -->
        <section id="play-section" class="content-section active">
            <div class="row g-4">
                <!-- Story/Chat Area -->
                <div class="col-lg-8">
                    <div class="card story-card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="bi bi-journal-text me-2"></i>Adventure Log</h5>
                            <span class="badge bg-warning text-dark" id="current-campaign">No Campaign Selected</span>
                        </div>
                        <div class="card-body story-body" id="story-container">
                            <div class="story-intro text-center py-5">
                                <i class="bi bi-stars display-1 text-warning mb-3"></i>
                                <h3>Welcome, Adventurer!</h3>
                                <p class="text-muted">Select a campaign or start a new adventure to begin your journey.</p>
                                <button class="btn btn-outline-warning" onclick="showSection('campaigns')">
                                    <i class="bi bi-compass me-2"></i>Browse Campaigns
                                </button>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="input-group">
                                <input type="text" class="form-control" id="player-input" placeholder="What do you do?" disabled>
                                <button class="btn btn-warning" id="send-action" disabled>
                                    <i class="bi bi-send-fill"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- Character Quick View -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h6 class="mb-0"><i class="bi bi-person-circle me-2"></i>Character</h6>
                        </div>
                        <div class="card-body" id="character-quick-view">
                            <p class="text-muted text-center mb-0">No character created</p>
                            <button class="btn btn-sm btn-outline-warning w-100 mt-2" onclick="showSection('character')">
                                Create Character
                            </button>
                        </div>
                    </div>

                    <!-- Dice Roller -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h6 class="mb-0"><i class="bi bi-dice-6 me-2"></i>Dice Roller</h6>
                        </div>
                        <div class="card-body">
                            <div class="dice-result text-center mb-3">
                                <span class="display-4" id="dice-result">--</span>
                            </div>
                            <div class="dice-buttons d-flex flex-wrap gap-2 justify-content-center">
                                <button class="btn btn-outline-light dice-btn" data-dice="4">d4</button>
                                <button class="btn btn-outline-light dice-btn" data-dice="6">d6</button>
                                <button class="btn btn-outline-light dice-btn" data-dice="8">d8</button>
                                <button class="btn btn-outline-light dice-btn" data-dice="10">d10</button>
                                <button class="btn btn-outline-light dice-btn" data-dice="12">d12</button>
                                <button class="btn btn-outline-warning dice-btn" data-dice="20">d20</button>
                                <button class="btn btn-outline-danger dice-btn" data-dice="100">d100</button>
                            </div>
                            <div class="mt-3">
                                <div class="input-group input-group-sm">
                                    <input type="text" class="form-control" id="custom-dice" placeholder="2d6+3">
                                    <button class="btn btn-warning" id="roll-custom">Roll</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card">
                        <div class="card-header">
                            <h6 class="mb-0"><i class="bi bi-lightning me-2"></i>Quick Actions</h6>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-info btn-sm quick-action" data-action="look around">
                                    <i class="bi bi-eye me-2"></i>Look Around
                                </button>
                                <button class="btn btn-outline-success btn-sm quick-action" data-action="search for items">
                                    <i class="bi bi-search me-2"></i>Search
                                </button>
                                <button class="btn btn-outline-danger btn-sm quick-action" data-action="attack">
                                    <i class="bi bi-sword me-2"></i>Attack
                                </button>
                                <button class="btn btn-outline-primary btn-sm quick-action" data-action="talk to nearby characters">
                                    <i class="bi bi-chat-dots me-2"></i>Talk
                                </button>
                                <button class="btn btn-outline-warning btn-sm quick-action" data-action="use magic">
                                    <i class="bi bi-magic me-2"></i>Cast Spell
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Character Creation Section -->
        <section id="character-section" class="content-section">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="mb-0"><i class="bi bi-person-plus me-2"></i>Character Creation</h4>
                        </div>
                        <div class="card-body">
                            <form id="character-form">
                                <div class="row g-4">
                                    <!-- Basic Info -->
                                    <div class="col-md-6">
                                        <h5 class="border-bottom border-warning pb-2 mb-3">Basic Information</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Character Name</label>
                                            <input type="text" class="form-control" id="char-name" required>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Race</label>
                                            <select class="form-select" id="char-race" required>
                                                <option value="">Select Race</option>
                                                <option value="Human">Human</option>
                                                <option value="Elf">Elf</option>
                                                <option value="Dwarf">Dwarf</option>
                                                <option value="Halfling">Halfling</option>
                                                <option value="Dragonborn">Dragonborn</option>
                                                <option value="Gnome">Gnome</option>
                                                <option value="Half-Elf">Half-Elf</option>
                                                <option value="Half-Orc">Half-Orc</option>
                                                <option value="Tiefling">Tiefling</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Class</label>
                                            <select class="form-select" id="char-class" required>
                                                <option value="">Select Class</option>
                                                <option value="Barbarian">Barbarian</option>
                                                <option value="Bard">Bard</option>
                                                <option value="Cleric">Cleric</option>
                                                <option value="Druid">Druid</option>
                                                <option value="Fighter">Fighter</option>
                                                <option value="Monk">Monk</option>
                                                <option value="Paladin">Paladin</option>
                                                <option value="Ranger">Ranger</option>
                                                <option value="Rogue">Rogue</option>
                                                <option value="Sorcerer">Sorcerer</option>
                                                <option value="Warlock">Warlock</option>
                                                <option value="Wizard">Wizard</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Level</label>
                                            <input type="number" class="form-control" id="char-level" value="1" min="1" max="20">
                                        </div>
                                    </div>

                                    <!-- Stats -->
                                    <div class="col-md-6">
                                        <h5 class="border-bottom border-warning pb-2 mb-3">
                                            Ability Scores
                                            <button type="button" class="btn btn-sm btn-outline-warning float-end" id="roll-stats">
                                                <i class="bi bi-dice-6"></i> Roll Stats
                                            </button>
                                        </h5>
                                        <div class="row g-2">
                                            <div class="col-6">
                                                <label class="form-label">Strength</label>
                                                <input type="number" class="form-control stat-input" id="stat-str" value="10" min="1" max="20">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Dexterity</label>
                                                <input type="number" class="form-control stat-input" id="stat-dex" value="10" min="1" max="20">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Constitution</label>
                                                <input type="number" class="form-control stat-input" id="stat-con" value="10" min="1" max="20">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Intelligence</label>
                                                <input type="number" class="form-control stat-input" id="stat-int" value="10" min="1" max="20">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Wisdom</label>
                                                <input type="number" class="form-control stat-input" id="stat-wis" value="10" min="1" max="20">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Charisma</label>
                                                <input type="number" class="form-control stat-input" id="stat-cha" value="10" min="1" max="20">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Background -->
                                    <div class="col-12">
                                        <h5 class="border-bottom border-warning pb-2 mb-3">Background</h5>
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label class="form-label">Background</label>
                                                <select class="form-select" id="char-background">
                                                    <option value="Acolyte">Acolyte</option>
                                                    <option value="Criminal">Criminal</option>
                                                    <option value="Folk Hero">Folk Hero</option>
                                                    <option value="Noble">Noble</option>
                                                    <option value="Outlander">Outlander</option>
                                                    <option value="Sage">Sage</option>
                                                    <option value="Soldier">Soldier</option>
                                                    <option value="Urchin">Urchin</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Alignment</label>
                                                <select class="form-select" id="char-alignment">
                                                    <option value="Lawful Good">Lawful Good</option>
                                                    <option value="Neutral Good">Neutral Good</option>
                                                    <option value="Chaotic Good">Chaotic Good</option>
                                                    <option value="Lawful Neutral">Lawful Neutral</option>
                                                    <option value="True Neutral">True Neutral</option>
                                                    <option value="Chaotic Neutral">Chaotic Neutral</option>
                                                    <option value="Lawful Evil">Lawful Evil</option>
                                                    <option value="Neutral Evil">Neutral Evil</option>
                                                    <option value="Chaotic Evil">Chaotic Evil</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Hit Points</label>
                                                <input type="number" class="form-control" id="char-hp" value="10" min="1">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Backstory -->
                                    <div class="col-12">
                                        <label class="form-label">Backstory</label>
                                        <textarea class="form-control" id="char-backstory" rows="3" placeholder="Write your character's backstory or click Generate to let AI create one..."></textarea>
                                        <button type="button" class="btn btn-sm btn-outline-info mt-2" id="generate-backstory">
                                            <i class="bi bi-stars me-1"></i> AI Generate Backstory
                                        </button>
                                    </div>
                                </div>

                                <div class="d-flex gap-2 mt-4">
                                    <button type="submit" class="btn btn-warning">
                                        <i class="bi bi-save me-2"></i>Save Character
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" id="random-character">
                                        <i class="bi bi-shuffle me-2"></i>Random Character
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Campaigns Section -->
        <section id="campaigns-section" class="content-section">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h4><i class="bi bi-book me-2"></i>Campaign Library</h4>
                        <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#customCampaignModal">
                            <i class="bi bi-plus-lg me-2"></i>Custom Campaign
                        </button>
                    </div>
                </div>
            </div>

            <!-- Campaign Categories -->
            <ul class="nav nav-pills mb-4" id="campaign-tabs">
                <li class="nav-item">
                    <a class="nav-link active" href="#" data-category="all">All</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-category="official">Official</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-category="community">Community</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-category="ai-generated">AI Generated</a>
                </li>
            </ul>

            <!-- Campaign Cards -->
            <div class="row g-4" id="campaigns-container">
                <!-- Campaigns will be loaded here -->
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings-section" class="content-section">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="mb-0"><i class="bi bi-gear me-2"></i>Settings</h4>
                        </div>
                        <div class="card-body">
                            <!-- AI Settings -->
                            <h5 class="border-bottom border-warning pb-2 mb-3">AI Configuration</h5>
                            <div class="mb-4">
                                <label class="form-label">AI Provider</label>
                                <select class="form-select" id="ai-provider">
                                    <option value="openai">OpenAI (GPT)</option>
                                    <option value="groq">Groq (Free - Llama)</option>
                                    <option value="cohere">Cohere (Free Tier)</option>
                                    <option value="huggingface">Hugging Face (Free)</option>
                                    <option value="demo">Demo Mode (No API)</option>
                                </select>
                                <div class="form-text">Choose your AI provider. Demo mode works without an API key.</div>
                            </div>

                            <div class="mb-4" id="api-key-section">
                                <label class="form-label">API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="api-key" placeholder="Enter your API key">
                                    <button class="btn btn-outline-secondary" type="button" id="toggle-api-key">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                                <div class="form-text">Your API key is stored locally and never sent to our servers.</div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">AI Creativity (Temperature)</label>
                                <input type="range" class="form-range" id="ai-temperature" min="0" max="100" value="70">
                                <div class="d-flex justify-content-between">
                                    <small class="text-muted">Predictable</small>
                                    <small class="text-muted">Creative</small>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">DM Style</label>
                                <select class="form-select" id="dm-style">
                                    <option value="balanced">Balanced</option>
                                    <option value="narrative">Narrative Heavy</option>
                                    <option value="combat">Combat Focused</option>
                                    <option value="roleplay">Roleplay Focused</option>
                                    <option value="hardcore">Hardcore (Difficult)</option>
                                </select>
                            </div>

                            <!-- Game Settings -->
                            <h5 class="border-bottom border-warning pb-2 mb-3 mt-4">Game Settings</h5>

                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="auto-roll" checked>
                                <label class="form-check-label" for="auto-roll">Auto-roll dice for checks</label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="sound-effects">
                                <label class="form-check-label" for="sound-effects">Sound effects</label>
                            </div>

                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="dark-mode" checked>
                                <label class="form-check-label" for="dark-mode">Dark mode</label>
                            </div>

                            <!-- Save/Export -->
                            <h5 class="border-bottom border-warning pb-2 mb-3 mt-4">Data Management</h5>
                            <div class="d-flex gap-2 flex-wrap">
                                <button class="btn btn-outline-primary" id="export-data">
                                    <i class="bi bi-download me-2"></i>Export Save
                                </button>
                                <button class="btn btn-outline-primary" id="import-data">
                                    <i class="bi bi-upload me-2"></i>Import Save
                                </button>
                                <button class="btn btn-outline-danger" id="clear-data">
                                    <i class="bi bi-trash me-2"></i>Clear All Data
                                </button>
                            </div>
                            <input type="file" id="import-file" class="d-none" accept=".json">
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Custom Campaign Modal -->
    <div class="modal fade" id="customCampaignModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-pencil-square me-2"></i>Create Custom Campaign</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="custom-campaign-form">
                        <div class="mb-3">
                            <label class="form-label">Campaign Name</label>
                            <input type="text" class="form-control" id="campaign-name" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Setting</label>
                            <select class="form-select" id="campaign-setting">
                                <option value="fantasy">High Fantasy</option>
                                <option value="dark-fantasy">Dark Fantasy</option>
                                <option value="sword-sorcery">Sword & Sorcery</option>
                                <option value="steampunk">Steampunk</option>
                                <option value="horror">Gothic Horror</option>
                                <option value="custom">Custom Setting</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description / Premise</label>
                            <textarea class="form-control" id="campaign-description" rows="4" placeholder="Describe your campaign setting, main conflict, or starting scenario..."></textarea>
                        </div>
                        <button type="button" class="btn btn-outline-info mb-3" id="ai-generate-campaign">
                            <i class="bi bi-stars me-2"></i>AI Generate Campaign
                        </button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" id="start-custom-campaign">
                        <i class="bi bi-play-fill me-2"></i>Start Campaign
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Combat Modal -->
    <div class="modal fade" id="combatModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-danger">
                    <h5 class="modal-title"><i class="bi bi-sword me-2"></i>Combat!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card bg-dark">
                                <div class="card-header">Your Party</div>
                                <div class="card-body" id="party-combat-view">
                                    <!-- Party members shown here -->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card bg-dark">
                                <div class="card-header">Enemies</div>
                                <div class="card-body" id="enemies-combat-view">
                                    <!-- Enemies shown here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3" id="combat-log">
                        <!-- Combat log -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger" id="combat-attack">Attack</button>
                    <button class="btn btn-info" id="combat-defend">Defend</button>
                    <button class="btn btn-warning" id="combat-spell">Cast Spell</button>
                    <button class="btn btn-secondary" id="combat-flee">Flee</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="notification-toast" class="toast" role="alert">
            <div class="toast-header">
                <i class="bi bi-info-circle me-2"></i>
                <strong class="me-auto">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-message"></div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="app.js"></script>
</body>
</html>
